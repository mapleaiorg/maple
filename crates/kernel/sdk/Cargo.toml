[package]
name = "maple-kernel-sdk"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
rust-version.workspace = true
description = "MWL SDK: CLI commands, REST API routes, and Python bindings"

[features]
default = ["cli", "api"]
cli = ["clap"]
api = ["axum", "tower-http"]
python = ["pyo3"]

[dependencies]
# MWL kernel crates
maple-mwl-types = { path = "../../mwl/types" }
maple-mwl-identity = { path = "../../mwl/identity" }
maple-kernel-fabric = { path = "../fabric" }
maple-kernel-gate = { path = "../gate" }
maple-kernel-governance = { path = "../governance" }
maple-kernel-provenance = { path = "../provenance" }
maple-kernel-safety = { path = "../safety" }
maple-kernel-profiles = { path = "../profiles" }
maple-kernel-financial = { path = "../financial" }

# Serialization
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true }

# Async
tokio = { workspace = true }

# Tracing
tracing = { workspace = true }

# Error handling
thiserror = { workspace = true }

# HTTP client (for CLI)
reqwest = { workspace = true }

# Unique IDs
uuid = { workspace = true, features = ["v4"] }

# Optional: CLI framework
clap = { version = "4.4", features = ["derive"], optional = true }

# Optional: Web framework (for API routes)
axum = { version = "0.7", features = ["macros"], optional = true }
tower-http = { version = "0.5", features = ["cors", "trace"], optional = true }

# Optional: Python bindings
pyo3 = { version = "0.20", features = ["extension-module"], optional = true }

# Time (used by API handlers)
chrono = { workspace = true }

[dev-dependencies]
tower = { workspace = true, features = ["util"] }
